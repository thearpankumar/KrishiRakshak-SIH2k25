# Digital Krishi Officer - Environment Configuration
# Copy this file to .env and modify the values as needed

# =============================================================================
# FastAPI Backend Configuration
# =============================================================================

# Database Configuration
DATABASE_URL=postgresql+asyncpg://n8n:n8npassword@localhost:5432/krishi_officer
DATABASE_URL_SYNC=postgresql://n8n:n8npassword@localhost:5432/krishi_officer

# Redis Configuration
REDIS_URL=redis://:redispassword@localhost:6379/1

# Qdrant Vector Database
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=qa_embeddings

# Security
SECRET_KEY=your-super-secret-key-change-in-production-make-it-very-long-and-random
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# OpenAI API (Required for AI chat functionality)
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your_openai_api_key_here

# File Upload Configuration
UPLOAD_DIR=uploads
MAX_FILE_SIZE_MB=10

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60

# CORS Configuration (Frontend URLs)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000,http://127.0.0.1:8080

# =============================================================================
# n8n Configuration (for workflow automation)
# =============================================================================

# Basic Authentication Credentials (CHANGE THESE!)
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=changeme123

# Domain Configuration
DOMAIN_NAME=example.com
# The subdomain to serve from
SUBDOMAIN=n8n
# The above example serve n8n at: https://n8n.example.com

# Timezone Configuration
GENERIC_TIMEZONE=Asia/Kolkata
TZ=Asia/Kolkata

# The email address to use for the TLS/SSL certificate creation
SSL_EMAIL=your-email@example.com

# Database Configuration (shared with FastAPI)
DB_POSTGRES_USER=n8n
DB_POSTGRES_PASSWORD=n8npassword
DB_POSTGRES_DB=n8n

# Redis Configuration (shared with FastAPI)
REDIS_PASSWORD=redispassword

# Network Configuration
# Using ngrok URL with /n8n path for external webhook access
# Replace with your actual ngrok domain
WEBHOOK_URL=https://your-app-domain.ngrok-free.app/n8n/

# Server IP for network access (update this with your server's local IP)
# Example: SERVER_IP=192.168.1.100
SERVER_IP=localhost

# =============================================================================
# Development Configuration
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Debug Mode
DEBUG=true

# API Documentation
API_DOCS_ENABLED=true

# =============================================================================
# Traefik Configuration
# =============================================================================

# Let's Encrypt Email for SSL certificates
ACME_EMAIL=your-email@example.com

# Traefik Dashboard Configuration
# Generate hash: echo $(htpasswd -nB admin) | sed -e s/\\$/\\$\\$/g
# Default below is admin/password (CHANGE IN PRODUCTION!)
TRAEFIK_DASHBOARD_AUTH=admin:$$2y$$10$$3ByTN8O1kD3XDfuW3z4HYuTFoVoJ1zJ1zJ1zJ1zJ1zJ1zJ1zJ1zJ1O

# =============================================================================
# ngrok Configuration
# =============================================================================

# ngrok Auth Token (Get from ngrok dashboard: https://dashboard.ngrok.com/get-started/your-authtoken)
NGROK_AUTH_TOKEN=your_ngrok_auth_token_here

# ngrok Single Domain (for both FastAPI and n8n via path-based routing)
# If using free plan, comment out this line and ngrok will assign random domain
NGROK_DOMAIN=your-app-domain.ngrok-free.app

# ngrok Region (us, eu, ap, au, sa, jp, in)
NGROK_REGION=us

# =============================================================================
# Security Notes
# =============================================================================
# 1. Change all default passwords before production deployment
# 2. Generate a strong SECRET_KEY (use: openssl rand -hex 32)
# 3. Use a real email address for ACME_EMAIL (Let's Encrypt notifications)
# 4. For production, set ENVIRONMENT=production and DEBUG=false
# 5. Secure your ngrok auth token - don't commit it to version control
# 6. Consider using Docker secrets or external secret management for production